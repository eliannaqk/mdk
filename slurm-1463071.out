============================================================
LRP1 Binding Epitope Definition
============================================================

1. Analyzing MDK structure: data/structures/1mkc.pdb

2. Identifying LRP1 binding epitope...
  Found 5 basic surface residues
  Clustered into 3 patches

3. Expanding epitope definition...
  Core epitope: 5 residues
  Expanded epitope: 31 residues

4. Saving epitope definition...
  Saved epitope definition to: data/epitopes/lrp1_patch.json

5. Creating visualization...
  Created PyMOL visualization script: results/visualizations/lrp1_epitope.pml

============================================================
Epitope Definition Summary
============================================================

LRP1 Binding Epitope:
  Core residues: [86, 87, 89, 99, 102]
  Total epitope size: 31 residues
  Estimated surface area: ~1550 Ų

Key basic residues for LRP1 binding:
  - LYS86
  - LYS87
  - ARG89
  - ARG99
  - LYS102

Output files:
  - Epitope definition: data/epitopes/lrp1_patch.json
  - PyMOL script: results/visualizations/lrp1_epitope.pml

Next step: Run 04_run_bindcraft.py to design binders
Available GPUs:
NVIDIA H2001: gpu
┌───────────────────────────────────────────────────────────────────────────────┐
│                                  PyRosetta-4                                  │
│               Created in JHU by Sergey Lyskov and PyRosetta Team              │
│               (C) Copyright Rosetta Commons Member Institutions               │
│                                                                               │
│ NOTE: USE OF PyRosetta FOR COMMERCIAL PURPOSES REQUIRES PURCHASE OF A LICENSE │
│          See LICENSE.PyRosetta.md or email license@uw.edu for details         │
└───────────────────────────────────────────────────────────────────────────────┘
PyRosetta-4 2025 [Rosetta PyRosetta4.Release.python39.ubuntu 2025.37+release.df75a9c48e763e52a7aa3f5dfba077f4da88dbf5 2025-09-03T12:23:30] retrieved from: http://www.pyrosetta.org
Running binder design for target settings
Design settings used: default_4stage_multimer
Filtering designs based on default_filters
Starting trajectory: MDK_human_l53_s677711
Traceback (most recent call last):
  File "/home/eqk3/apps/BindCraft/bindcraft.py", line 109, in <module>
    trajectory = binder_hallucination(design_name, target_settings["starting_pdb"], target_settings["chains"],
  File "/home/eqk3/apps/BindCraft/functions/colabdesign_utils.py", line 36, in binder_hallucination
    af_model.prep_inputs(pdb_filename=starting_pdb, chain=chain, binder_len=length, hotspot=target_hotspot_residues, seed=seed, rm_aa=advanced_settings["omit_AAs"],
  File "/home/eqk3/project_pi_mg269/eqk3/.conda-envs/bindcraft-af3/lib/python3.9/site-packages/colabdesign/af/prep.py", line 230, in _prep_binder
    self.opt["hotspot"] = prep_pos(hotspot, **self._pdb["idx"])["pos"]
  File "/home/eqk3/project_pi_mg269/eqk3/.conda-envs/bindcraft-af3/lib/python3.9/site-packages/colabdesign/shared/prep.py", line 42, in prep_pos
    assert len(idx) == 1, f'ERROR: positions {i} and chain {c} not found'
AssertionError: ERROR: positions 107 and chain A not found

============================================================
Running BindCraft (real pipeline)
============================================================

Running BindCraft pipeline:
python bindcraft.py --settings /home/eqk3/MDX/results/bindcraft/20250922-174618/settings.generated.json --filters /home/eqk3/apps/BindCraft/settings_filters/default_filters.json --advanced /home/eqk3/apps/BindCraft/settings_advanced/default_4stage_multimer.json
Traceback (most recent call last):
  File "/home/eqk3/MDX/04_run_bindcraft.py", line 242, in <module>
    main()
  File "/home/eqk3/MDX/04_run_bindcraft.py", line 225, in main
    design_path = invoke_bindcraft(settings_path)
  File "/home/eqk3/MDX/04_run_bindcraft.py", line 93, in invoke_bindcraft
    subprocess.run(cmd, cwd=str(BINDCRAFT_ROOT), env=env, check=True)
  File "/home/eqk3/project_pi_mg269/eqk3/.conda-envs/bindcraft-af3/lib/python3.9/subprocess.py", line 528, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['python', 'bindcraft.py', '--settings', '/home/eqk3/MDX/results/bindcraft/20250922-174618/settings.generated.json', '--filters', '/home/eqk3/apps/BindCraft/settings_filters/default_filters.json', '--advanced', '/home/eqk3/apps/BindCraft/settings_advanced/default_4stage_multimer.json']' returned non-zero exit status 1.
